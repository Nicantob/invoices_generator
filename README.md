# invoices generator
#### Код: AndrejPress (Коваленко А.В.) 11.2023 - 02.2024 в рамках практики УИИ (разработка OCR AI)
https://github.com/yenotas/invoices_generator/
####
Генератор тестовых данных и изображений счетов с искажениями, шумами и печатями, 
для тестирования и обучения системы распознавания документов. 
Библиотека имитации отсканированных документов, с хранением данных 
(по которым строятся счета) в "generated_data.json". 
В JSON при построении SVG-файлов и искажениях дописываются координаты центров и размеров надписей,
координаты печатей, названия и координаты углов геометрических искажений.
### Использование:
#### В "config.py":
- можно указать количество генерируемых файлов, 
- качество и масштабирование изображений, 
- скорректировать размер печати, 
- изменить валюту счета, 
- включить сохранение фрагментов вставок в папку generated_files/text_fragments, 
для визуальной сверки генерируемых текстовых вставок в растре. 
#### В папке "examples": 
- скрипты, поочередно запуская которые (по номерам),
можно создать "generated_data.json" и заполнить все папки генерациями - от шаблонов SVG 
до изображений JPEG с искажениями и добавленными круглыми печатями.
Папка "generated_files" и соответствующие поддиректории, с генерируемыми файлами, 
создаются скриптами.
#### В папке "tools": 

- bbox_viewer - визуализация записанных координат и размеров вставок (! используется только после шагов 01-03, 
когда сгенерированные счета сконвертированы в растр !), результат разметки сохраняется в папку 
generated_files/markup_images

- font_to_svg_insider - внедрение шрифта в SVG файл (осталось на память, не используется),

- svg_inner_coordinares_corrector - распаковка контейнеров SVG в список тегов с пересчитанными координатами, 
для упрощения расчетов координат надписей (не используется)

- text_cleaning - заготовка для быстрой очистки больших файлов по регулярным выражениям и готовым методам

####  Конвертации SVG-файлов в PNG:
Собственный конвертер на стандартном PIL для svg сгенерированных в проекте по установленному шаблону

Для установки библиотек:
+ pip install -r requirements.txt

Для установки шрифтов 
+ В директорию data/fonts/.. в каждую папку скопировать файл шрифта (.ttf)
соответствующего стиля с одним и тем же именем в каждую из папок, 
убрав из названия какие-либо уточнения, типа "bold" "bolditalic" "regular", оставив только имя. 
В папки "italic" "bolditalic" сохранять не обязательно, но папка "bold" 
должна быть по составу абсолютно такая же как и "regular", с той лишь разницей, 
что под одинаковыми именами скрывается один шрифт различного начертания. 





